<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.19" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>[구현] 불변 클래스 구현 | 앤디 블로그</title><meta name="description" content="불변 클래스를 구현해보자">
    <link rel="preload" href="/assets/style-DCLYmOir.css" as="style"><link rel="stylesheet" href="/assets/style-DCLYmOir.css">
    <link rel="modulepreload" href="/assets/app-BBTuvtPs.js"><link rel="modulepreload" href="/assets/2025-10-05-immutableclass.html-Cqx2iPex.js">
    <link rel="prefetch" href="/assets/index.html-BdRlH1DO.js" as="script"><link rel="prefetch" href="/assets/index.html-DExlpWOb.js" as="script"><link rel="prefetch" href="/assets/index.html-BNDzYsSJ.js" as="script"><link rel="prefetch" href="/assets/index.html-BXelSvlM.js" as="script"><link rel="prefetch" href="/assets/index.html-Dr9eAZIY.js" as="script"><link rel="prefetch" href="/assets/2023-11-18-system.html-DmQZZ7gC.js" as="script"><link rel="prefetch" href="/assets/2024-02-26-network.html-B_QkATt4.js" as="script"><link rel="prefetch" href="/assets/2024-04-24-cloudfinops.html-Dfwtb4m3.js" as="script"><link rel="prefetch" href="/assets/2024-10-10-tensorflow.html-BaAxv3iu.js" as="script"><link rel="prefetch" href="/assets/2025-02-08-whatiswork.html-BDu6TdW4.js" as="script"><link rel="prefetch" href="/assets/2025-02-11-kafka.html-D1nDrSqe.js" as="script"><link rel="prefetch" href="/assets/2025-02-16-object.html-D3mP3Ccv.js" as="script"><link rel="prefetch" href="/assets/2025-03-03-skilloflove.html-gMZqlP8q.js" as="script"><link rel="prefetch" href="/assets/2025-03-08-terraform.html-DStsNIAR.js" as="script"><link rel="prefetch" href="/assets/2025-03-09-software.html-CtQCOnPQ.js" as="script"><link rel="prefetch" href="/assets/2025-03-23-chosun.html-CGqxhKyq.js" as="script"><link rel="prefetch" href="/assets/2025-08-31-unittest.html-BmTnMflO.js" as="script"><link rel="prefetch" href="/assets/2026-01-05-c.html-Bp3Eivps.js" as="script"><link rel="prefetch" href="/assets/2025-02-07-ze.html-DfhvhEHg.js" as="script"><link rel="prefetch" href="/assets/2025-02-10-firstlog.html-BVv9vXfE.js" as="script"><link rel="prefetch" href="/assets/2025-02-14-log.html-C3JjRCNv.js" as="script"><link rel="prefetch" href="/assets/2025-02-23-anna.html-BqP7iXYb.js" as="script"><link rel="prefetch" href="/assets/2025-03-02-bystander.html-z-pphV8k.js" as="script"><link rel="prefetch" href="/assets/2025-04-08-k8s.html-DsZiHXQ-.js" as="script"><link rel="prefetch" href="/assets/2025-04-20-log.html-JpVZ94Wb.js" as="script"><link rel="prefetch" href="/assets/2025-08-18-coworker.html-Cmn6SgtC.js" as="script"><link rel="prefetch" href="/assets/2026-01-02-design.html-DrwTxfnT.js" as="script"><link rel="prefetch" href="/assets/2026-01-22-hex.html-Bsefs4T4.js" as="script"><link rel="prefetch" href="/assets/2026-01-23-ktx.html-DnlDOGve.js" as="script"><link rel="prefetch" href="/assets/index.html-B2BHLEFV.js" as="script"><link rel="prefetch" href="/assets/2025-02-25-aws.html-BhePSm8N.js" as="script"><link rel="prefetch" href="/assets/2025-03-13-aws.html-Cq9Dct-b.js" as="script"><link rel="prefetch" href="/assets/2025-03-20-aws.html-mWv6I1R-.js" as="script"><link rel="prefetch" href="/assets/index.html-C6WW4z0G.js" as="script"><link rel="prefetch" href="/assets/2025-08-26-culture1.html-u5baoSSV.js" as="script"><link rel="prefetch" href="/assets/2025-08-27-culturetest.html-7d45ult6.js" as="script"><link rel="prefetch" href="/assets/index.html-DJULmXR4.js" as="script"><link rel="prefetch" href="/assets/2025-04-20-leteraljoin.html-DtubCUeu.js" as="script"><link rel="prefetch" href="/assets/2025-09-30-likesearch.html-DV9h0V4d.js" as="script"><link rel="prefetch" href="/assets/index.html-3y-lU9Mk.js" as="script"><link rel="prefetch" href="/assets/2023-10-20-cpucredit.html-CVGfwYhK.js" as="script"><link rel="prefetch" href="/assets/2023-12-15-awslambda.html-D7-vcF9X.js" as="script"><link rel="prefetch" href="/assets/2024-05-23-goodlog.html-CzarnsE9.js" as="script"><link rel="prefetch" href="/assets/2024-10-28-sg.html-ByHc8XzZ.js" as="script"><link rel="prefetch" href="/assets/2025-01-24-eksdnsresolve.html-CAlZqoom.js" as="script"><link rel="prefetch" href="/assets/2025-03-15-filesystem.html-UHFY1tWw.js" as="script"><link rel="prefetch" href="/assets/2025-05-04-awsregion.html-Cs03Y63b.js" as="script"><link rel="prefetch" href="/assets/2025-09-03-kuberesource.html-KsE4Yl41.js" as="script"><link rel="prefetch" href="/assets/2025-09-05-podeviction.html-BDZUiy7P.js" as="script"><link rel="prefetch" href="/assets/2025-09-15-autoscaling.html-fdnZuxTS.js" as="script"><link rel="prefetch" href="/assets/2025-09-22-rollingupdate.html-BA21tSHO.js" as="script"><link rel="prefetch" href="/assets/2025-09-29-loadtest.html-BZAEqfKB.js" as="script"><link rel="prefetch" href="/assets/2025-11-17-kms.html-Bnh416rJ.js" as="script"><link rel="prefetch" href="/assets/index.html-BZ99tLdB.js" as="script"><link rel="prefetch" href="/assets/2025-09-17-hashmap.html-BRlZ-UQ6.js" as="script"><link rel="prefetch" href="/assets/2025-09-23-referencevalue.html-CkWqfCJ0.js" as="script"><link rel="prefetch" href="/assets/2025-10-04-stringimmutable.html-D-dDjGpQ.js" as="script"><link rel="prefetch" href="/assets/2025-10-05-singleton.html-DXE_pCzB.js" as="script"><link rel="prefetch" href="/assets/index.html-BWGPm-N_.js" as="script"><link rel="prefetch" href="/assets/2025-01-18-kafkadocker.html-CmFRZPU-.js" as="script"><link rel="prefetch" href="/assets/2025-10-25-kafkaaggregate.html-Cn5DILo4.js" as="script"><link rel="prefetch" href="/assets/2025-12-09-kafkadesignpattern.html-IqYR-bmP.js" as="script"><link rel="prefetch" href="/assets/index.html-CWaVT-qx.js" as="script"><link rel="prefetch" href="/assets/2023-04-12-validation.html-BphHSJPD.js" as="script"><link rel="prefetch" href="/assets/2023-04-18-rtr.html-DunS1ivE.js" as="script"><link rel="prefetch" href="/assets/2023-04-25-mdc.html-Bg5dkPHx.js" as="script"><link rel="prefetch" href="/assets/2023-05-10-SpringRestDocs1.html-CwgJ9dAo.js" as="script"><link rel="prefetch" href="/assets/2023-05-13-SpringRestDocs2.html-DzbQzqVs.js" as="script"><link rel="prefetch" href="/assets/2023-05-14-SpringRestDocs3.html-DpCIxznZ.js" as="script"><link rel="prefetch" href="/assets/2025-02-13-security.html-HXVayZr1.js" as="script"><link rel="prefetch" href="/assets/2025-06-25-alarm.html-CS6_HGaU.js" as="script"><link rel="prefetch" href="/assets/2025-07-20-ssewebsocket.html-32SJzeKn.js" as="script"><link rel="prefetch" href="/assets/2025-08-05-test1.html-xd1F9Unp.js" as="script"><link rel="prefetch" href="/assets/2025-08-20-test2.html-DUoAmkeq.js" as="script"><link rel="prefetch" href="/assets/2025-08-28-jsonproperty.html-DajjwDgw.js" as="script"><link rel="prefetch" href="/assets/2025-09-08-sonarqube.html-gbp-3VJ-.js" as="script"><link rel="prefetch" href="/assets/2025-10-22-eventhandler.html-DCbORpuC.js" as="script"><link rel="prefetch" href="/assets/index.html-Lk1XpCoi.js" as="script"><link rel="prefetch" href="/assets/2025-01-01-list.html-oi5Zekwh.js" as="script"><link rel="prefetch" href="/assets/2025-06-27-iot.html-Cff2G5JB.js" as="script"><link rel="prefetch" href="/assets/2025-07-20-ssewebsocket.html-Bq-hPQn9.js" as="script"><link rel="prefetch" href="/assets/2025-08-13-mqtt.html-qBFPUo9Q.js" as="script"><link rel="prefetch" href="/assets/2025-08-29-oidc.html-77R6qt7F.js" as="script"><link rel="prefetch" href="/assets/2025-09-04-smtp.html-SRcl85ih.js" as="script"><link rel="prefetch" href="/assets/2025-09-16-cscd.html-cH7ZVDQD.js" as="script"><link rel="prefetch" href="/assets/2025-09-18-flame.html-COBaqRA1.js" as="script"><link rel="prefetch" href="/assets/2025-10-01-keycloak.html-A_1ETw3-.js" as="script"><link rel="prefetch" href="/assets/index.html-DTemb1jM.js" as="script"><link rel="prefetch" href="/assets/404.html-BB3VRBRC.js" as="script"><link rel="prefetch" href="/assets/html2pdf-BxCx450T.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-7MC2TMWH-DLHeIl6R.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><!----><span class="vp-site-name" aria-hidden="true">앤디 블로그</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="글"><span class="title">글</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="글"><span class="title">글</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/posts/" aria-label="모두"><!--[--><!--[--><!--]--><!--]-->모두<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/posts/architecture/" aria-label="아키텍처"><!--[--><!--[--><!--]--><!--]-->아키텍처<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/posts/tech/" aria-label="기술"><!--[--><!--[--><!--]--><!--]-->기술<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/posts/java/" aria-label="자바"><!--[--><!--[--><!--]--><!--]-->자바<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/posts/spring/" aria-label="스프링"><!--[--><!--[--><!--]--><!--]-->스프링<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/posts/infra/" aria-label="인프라"><!--[--><!--[--><!--]--><!--]-->인프라<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/posts/kafka/" aria-label="카프카"><!--[--><!--[--><!--]--><!--]-->카프카<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/posts/database/" aria-label="데이터베이스"><!--[--><!--[--><!--]--><!--]-->데이터베이스<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/posts/conference/" aria-label="컨퍼런스"><!--[--><!--[--><!--]--><!--]-->컨퍼런스<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/posts/culture/" aria-label="개발 문화"><!--[--><!--[--><!--]--><!--]-->개발 문화<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/books/" aria-label="책"><!--[--><!--[--><!--]--><!--]-->책<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/logs/" aria-label="짧은 글"><!--[--><!--[--><!--]--><!--]-->짧은 글<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/resume/" aria-label="이력서"><!--[--><!--[--><!--]--><!--]-->이력서<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="글"><span class="title">글</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="글"><span class="title">글</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/posts/" aria-label="모두"><!--[--><!--[--><!--]--><!--]-->모두<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/posts/architecture/" aria-label="아키텍처"><!--[--><!--[--><!--]--><!--]-->아키텍처<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/posts/tech/" aria-label="기술"><!--[--><!--[--><!--]--><!--]-->기술<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/posts/java/" aria-label="자바"><!--[--><!--[--><!--]--><!--]-->자바<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/posts/spring/" aria-label="스프링"><!--[--><!--[--><!--]--><!--]-->스프링<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/posts/infra/" aria-label="인프라"><!--[--><!--[--><!--]--><!--]-->인프라<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/posts/kafka/" aria-label="카프카"><!--[--><!--[--><!--]--><!--]-->카프카<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/posts/database/" aria-label="데이터베이스"><!--[--><!--[--><!--]--><!--]-->데이터베이스<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/posts/conference/" aria-label="컨퍼런스"><!--[--><!--[--><!--]--><!--]-->컨퍼런스<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/posts/culture/" aria-label="개발 문화"><!--[--><!--[--><!--]--><!--]-->개발 문화<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/books/" aria-label="책"><!--[--><!--[--><!--]--><!--]-->책<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/logs/" aria-label="짧은 글"><!--[--><!--[--><!--]--><!--]-->짧은 글<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/resume/" aria-label="이력서"><!--[--><!--[--><!--]--><!--]-->이력서<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">[구현] 불변 클래스 구현 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="#_1-불변-클래스란" aria-label="1. 불변 클래스란?"><!--[--><!--[--><!--]--><!--]-->1. 불변 클래스란?<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#_2-불변-클래스-구현" aria-label="2. 불변 클래스 구현"><!--[--><!--[--><!--]--><!--]-->2. 불변 클래스 구현<!--[--><!--[--><!--]--><!--]--></a><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="#_2-1-getter-에서도-방어적-복사가-필요한-이유" aria-label="2.1 getter 에서도 방어적 복사가 필요한 이유"><!--[--><!--[--><!--]--><!--]-->2.1 getter 에서도 방어적 복사가 필요한 이유<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item" href="#_3-불변-클래스-구현-시-자주-놓치는-부분" aria-label="3. 불변 클래스 구현 시 자주 놓치는 부분"><!--[--><!--[--><!--]--><!--]-->3. 불변 클래스 구현 시 자주 놓치는 부분<!--[--><!--[--><!--]--><!--]--></a><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="#_3-1-배열-필드-byte-int-는-특히-위험" aria-label="3.1 배열 필드 (byte[], int[])는 특히 위험"><!--[--><!--[--><!--]--><!--]-->3.1 배열 필드 (byte[], int[])는 특히 위험<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#_3-2-가변-객체를-필드로-들고-있으면-깊은-불변이-아니다" aria-label="3.2 가변 객체를 필드로 들고 있으면 깊은 불변이 아니다"><!--[--><!--[--><!--]--><!--]-->3.2 가변 객체를 필드로 들고 있으면 깊은 불변이 아니다<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#_3-3-컬렉션-안의-요소가-가변일-때" aria-label="3.3. 컬렉션 안의 요소가 가변일 때"><!--[--><!--[--><!--]--><!--]-->3.3. 컬렉션 안의 요소가 가변일 때<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item" href="#_4-마무리" aria-label="4. 마무리"><!--[--><!--[--><!--]--><!--]-->4. 마무리<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><header class="page-header" data-v-84f05ea1><h1 class="title" data-v-84f05ea1>[구현] 불변 클래스 구현</h1><div class="meta" data-v-84f05ea1><time data-v-84f05ea1>2025년 10월 5일</time></div></header><nav class="table-of-contents"><ul><li><a aria-current="page" href="/posts/java/2025-10-05-immutableclass.html#_1-불변-클래스란" class="router-link-active router-link-exact-active">1. 불변 클래스란?</a></li><li><a aria-current="page" href="/posts/java/2025-10-05-immutableclass.html#_2-불변-클래스-구현" class="router-link-active router-link-exact-active">2. 불변 클래스 구현</a><ul><li><a aria-current="page" href="/posts/java/2025-10-05-immutableclass.html#_2-1-getter-에서도-방어적-복사가-필요한-이유" class="router-link-active router-link-exact-active">2.1 getter 에서도 방어적 복사가 필요한 이유</a></li></ul></li><li><a aria-current="page" href="/posts/java/2025-10-05-immutableclass.html#_3-불변-클래스-구현-시-자주-놓치는-부분" class="router-link-active router-link-exact-active">3. 불변 클래스 구현 시 자주 놓치는 부분</a><ul><li><a aria-current="page" href="/posts/java/2025-10-05-immutableclass.html#_3-1-배열-필드-byte-int-는-특히-위험" class="router-link-active router-link-exact-active">3.1 배열 필드 (byte[], int[])는 특히 위험</a></li><li><a aria-current="page" href="/posts/java/2025-10-05-immutableclass.html#_3-2-가변-객체를-필드로-들고-있으면-깊은-불변이-아니다" class="router-link-active router-link-exact-active">3.2 가변 객체를 필드로 들고 있으면 깊은 불변이 아니다</a></li><li><a aria-current="page" href="/posts/java/2025-10-05-immutableclass.html#_3-3-컬렉션-안의-요소가-가변일-때" class="router-link-active router-link-exact-active">3.3. 컬렉션 안의 요소가 가변일 때</a></li></ul></li><li><a aria-current="page" href="/posts/java/2025-10-05-immutableclass.html#_4-마무리" class="router-link-active router-link-exact-active">4. 마무리</a></li></ul></nav><h2 id="_1-불변-클래스란" tabindex="-1"><a class="header-anchor" href="#_1-불변-클래스란"><span>1. 불변 클래스란?</span></a></h2><p><strong>불변(Immutable) 클래스는 한 번 생성되면 객체 내부의 상태(값)를 변경할 수 없는 클래스</strong>를 말한다. 인스턴스는 생성 시점에 모든 상태가 결정되고, 그 이후에는 값이 절대 바뀌지 않는다. 상태 변경이 필요하다면 기존 인스턴스를 수정하는 대신 새 인스턴스를 새로 만들어 반환하는 방식으로 처리한다.</p><p>자바에서 가장 대표적인 불변 클래스는 String 이다. String 은 문자열을 바꾼다는 개념이라고 느껴지는 여러 연산이 실제로는 새 문자열 객체를 만들어 반환한다.</p><p>불변 객체는 다음과 같은 장점이 있다.</p><ul><li><strong>Thread-safe</strong> : 상태가 변하지 않으니 동기화(synchronized) 없이도 공유하기가 쉽다.</li><li><strong>예측 가능성</strong> : 객체가 어디서 어떻게 변했는지 추적할 필요가 없어서 디버깅이 편하다.</li><li><strong>캐싱/공유에 유리</strong> : 같은 값이면 재사용하기 쉽고, 해시 기반 컬렉션(HashMap, HashSet)에서도 안전하게 쓸 수 있다.</li><li><strong>방어적 프로그래밍에 도움</strong>: 외부에서 몰래 값을 바꾸는 부작용(side effect)을 차단한다.</li></ul><p>반대로 단점도 있다.</p><ul><li>상태 변경이 잦은 경우 객체 생성 비용과 GC 부담이 증가할 수 있다.</li><li>설계가 조금 더 번거롭고(방어적 복사 등), 컬렉션을 다룰 때 신경 쓸 포인트가 늘어난다.</li></ul><h1 id="_2-불변-클래스-구현" tabindex="-1"><a class="header-anchor" href="#_2-불변-클래스-구현"><span>2. 불변 클래스 구현</span></a></h1><p>불변 클래스를 구현하는 기본 규칙은 다음과 같다.</p><ul><li>클래스를 final로 선언해 상속을 막는다. <ul><li>상속이 가능하면 하위 클래스가 내부 상태를 변경 가능한 형태로 확장해버릴 수 있다.</li></ul></li><li>모든 필드를 private final로 선언한다.</li><li>setter를 제공하지 않는다.</li><li>필드가 List, Map, 배열처럼 가변(mutable) 객체라면, <ul><li>생성자에서 defensive copy(방어적 복사)</li><li>getter에서도 defensive copy 를 적용해 외부에서 내부 상태를 바꾸지 못하게 한다.</li></ul></li><li>내부에서 사용하는 가변 필드는 가능하면 불변 컬렉션으로 감싸서 보관한다.</li><li>equals/hashCode/toString 을 구현해 값 객체로의 사용성을 높인다.</li></ul><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Item</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> categories<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Item</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> categories<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token string">&quot;name must not be null&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>categories<span class="token punctuation">,</span> <span class="token string">&quot;categories must not be null&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// defensive copy + (선택) unmodifiable로 감싸 내부 보관</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>categories <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>categories<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> name<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getCategories</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 내부에서 unmodifiable로 보관하고 있다면 그대로 반환해도 안전</span></span>
<span class="line">        <span class="token keyword">return</span> categories<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// &quot;변경&quot;이 필요하면 새 객체를 만들어 반환</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Item</span> <span class="token function">withName</span><span class="token punctuation">(</span><span class="token class-name">String</span> newName<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">(</span>newName<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>categories<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Item</span> <span class="token function">withAddedCategory</span><span class="token punctuation">(</span><span class="token class-name">String</span> category<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> next <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>categories<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        next<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>category<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> next<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> o<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>o <span class="token keyword">instanceof</span> <span class="token class-name">Item</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Item</span> item <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Item</span><span class="token punctuation">)</span> o<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> name<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> categories<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>categories<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">hash</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> categories<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token string">&quot;Item{name=&#39;&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;&#39;, categories=&quot;</span> <span class="token operator">+</span> categories <span class="token operator">+</span> <span class="token char">&#39;}&#39;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-1-getter-에서도-방어적-복사가-필요한-이유" tabindex="-1"><a class="header-anchor" href="#_2-1-getter-에서도-방어적-복사가-필요한-이유"><span>2.1 getter 에서도 방어적 복사가 필요한 이유</span></a></h2><p>불변 객체에서 getter 를 방어적 복사하지 않으면 필드의 객체 내부가 변경될 수도 있다. 예를 들어 내부 필드를 아래처럼 그냥 반환하면,</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getCategories</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token keyword">return</span> categories<span class="token punctuation">;</span> <span class="token comment">// 위험!</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>외부에서 이렇게 바꿀 수 있다.</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token class-name">Item</span> item <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">(</span><span class="token string">&quot;keyboard&quot;</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;input&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">item<span class="token punctuation">.</span><span class="token function">getCategories</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;hacked&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 내부 리스트가 mutable이면 상태가 깨짐</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>그래서 두 가지 전략 중 하나를 선택한다.</p><p><strong>전략 A - getter에서 매번 복사해서 반환</strong></p><p><code>return new ArrayList&lt;&gt;(categories);</code></p><p>단, 호출이 잦으면 복사 비용이 생긴다.</p><p><strong>전략 B - 생성자에서 불변 컬렉션으로 만들어 보관하고 그대로 반환</strong></p><p><code>Collections.unmodifiableList(new ArrayList&lt;&gt;(categories))</code></p><p>훨씬 흔하게 쓰는 방식이다. (반환 비용이 거의 없음). 위 예시는 B 를 적용했다.</p><blockquote><p><strong>주의</strong></p><p>Collections.unmodifiableList(...)는 진짜 불변 리스트를 만드는 게 아니라 수정 메서드 호출을 막는 뷰(view)다. 그래서 원본 리스트를 그대로 감싸면 안 되고, 반드시 new ArrayList&lt;&gt;(...) 같은 복사본을 감싼 뒤 보관해야 한다.</p></blockquote><h1 id="_3-불변-클래스-구현-시-자주-놓치는-부분" tabindex="-1"><a class="header-anchor" href="#_3-불변-클래스-구현-시-자주-놓치는-부분"><span>3. 불변 클래스 구현 시 자주 놓치는 부분</span></a></h1><p>불변 클래스 구현 시 자주 놓치는 패턴들이다.</p><h2 id="_3-1-배열-필드-byte-int-는-특히-위험" tabindex="-1"><a class="header-anchor" href="#_3-1-배열-필드-byte-int-는-특히-위험"><span>3.1 배열 필드 (byte[], int[])는 특히 위험</span></a></h2><p>배열은 대표적인 가변 객체라서 방어적 복사가 필수다.</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Token</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> value<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Token</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// defensive copy</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> value<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// defensive copy</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-2-가변-객체를-필드로-들고-있으면-깊은-불변이-아니다" tabindex="-1"><a class="header-anchor" href="#_3-2-가변-객체를-필드로-들고-있으면-깊은-불변이-아니다"><span>3.2 가변 객체를 필드로 들고 있으면 깊은 불변이 아니다</span></a></h2><p>예를 들어 LocalDateTime 같은 건 불변이라 괜찮지만, Date(java.util.Date)처럼 가변인 객체는 그대로 들고 있으면 위험하다. 이런 경우도 방어적 복사가 필요하다.</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Event</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>Date</span> when<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Event</span><span class="token punctuation">(</span><span class="token class-name">Date</span> when<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>when <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>Date</span><span class="token punctuation">(</span>when<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Date</span> <span class="token function">getWhen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>Date</span><span class="token punctuation">(</span>when<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-3-컬렉션-안의-요소가-가변일-때" tabindex="-1"><a class="header-anchor" href="#_3-3-컬렉션-안의-요소가-가변일-때"><span>3.3. 컬렉션 안의 요소가 가변일 때</span></a></h2><p>List Person 에서 Person이 mutable이면, 리스트 자체는 못 바꿔도 요소는 바뀔 수 있다.</p><ul><li>얕은 불변(shallow immutability): 컬렉션 구조만 안 바뀜 (추가/삭제 불가)</li><li>깊은 불변(deep immutability): 요소 객체까지 불변</li></ul><p>깊은 불변이 필요하다면, 요소 타입도 불변으로 설계하거나, 요소를 복사해서 들고 있어야 한다.</p><h1 id="_4-마무리" tabindex="-1"><a class="header-anchor" href="#_4-마무리"><span>4. 마무리</span></a></h1><p>불변 클래스는 단순히 final을 붙이는 수준이 아니라, 외부에서 내부 상태에 접근해 바꿀 수 있는 모든 경로를 차단하는 것이 핵심이다. 특히 컬렉션/배열/가변 타입 필드에서는 방어적 복사를 습관처럼 적용해야 한다.</p><p>정리하면,</p><ul><li>final class</li><li>private final 필드</li><li>setter 없음</li><li>가변 필드면 복사해서 보관 + 불변 형태로 노출</li><li>변경이 필요하면 withXxx()처럼 새 객체 반환</li></ul><nav class="vp-page-nav" aria-label="page navigation" data-v-63cabaa2><!----><!----></nav></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><!----><!----></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-BBTuvtPs.js" defer></script>
  </body>
</html>
