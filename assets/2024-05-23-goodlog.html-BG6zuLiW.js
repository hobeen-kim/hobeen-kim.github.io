import{_ as d,c as u,a as e,b as i,d as _,f as a,r as s,o as p,e as t}from"./app-CSMHBbaB.js";const h="/images/2024-05-23-goodlog/image-20250908000707726.png",g="/images/2024-05-23-goodlog/image-20250908000744754.png",f="/images/2024-05-23-goodlog/image-20250908000814804.png",m="/images/2024-05-23-goodlog/image-20250908000949478.png",k="/images/2024-05-23-goodlog/image-20250908000846668.png",v={},x={class:"table-of-contents"};function b(c,l){const o=s("Header"),n=s("router-link"),r=s("Footer");return p(),u("div",null,[e(o),i("nav",x,[i("ul",null,[i("li",null,[e(n,{to:"#_0-로그"},{default:a(()=>l[0]||(l[0]=[t("0. 로그")])),_:1})]),i("li",null,[e(n,{to:"#_1-좋은-로그-에-대한-정의"},{default:a(()=>l[1]||(l[1]=[t("1. ''좋은 로그' 에 대한 정의")])),_:1})]),i("li",null,[e(n,{to:"#_2-필요한-정보가-있는-로그를-위해-고려해야-할-것들"},{default:a(()=>l[2]||(l[2]=[t("2. 필요한 정보가 있는 로그를 위해 고려해야 할 것들")])),_:1}),i("ul",null,[i("li",null,[e(n,{to:"#_2-1-목표가-있는-로그"},{default:a(()=>l[3]||(l[3]=[t("2.1 목표가 있는 로그")])),_:1})]),i("li",null,[e(n,{to:"#_2-2-일관성"},{default:a(()=>l[4]||(l[4]=[t("2.2 일관성")])),_:1})]),i("li",null,[e(n,{to:"#_2-3-믿을-수-있는-로그"},{default:a(()=>l[5]||(l[5]=[t("2.3 믿을 수 있는 로그")])),_:1})])])]),i("li",null,[e(n,{to:"#_3-의미가-명확한-로그를-위해-고려할-것들"},{default:a(()=>l[6]||(l[6]=[t("3. 의미가 명확한 로그를 위해 고려할 것들")])),_:1}),i("ul",null,[i("li",null,[e(n,{to:"#_3-1-이름에-대한-합의와-규약"},{default:a(()=>l[7]||(l[7]=[t("3.1 이름에 대한 합의와 규약")])),_:1})]),i("li",null,[e(n,{to:"#_3-2-이벤트를-구별하는-기준"},{default:a(()=>l[8]||(l[8]=[t("3.2 이벤트를 구별하는 기준")])),_:1})]),i("li",null,[e(n,{to:"#_3-3-표현력"},{default:a(()=>l[9]||(l[9]=[t("3.3 표현력")])),_:1})]),i("li",null,[e(n,{to:"#_3-4-빈-값의-의미"},{default:a(()=>l[10]||(l[10]=[t("3.4 빈 값의 의미")])),_:1})])])]),i("li",null,[e(n,{to:"#_4-편리하게-데이터를-얻기-위해-고려할-것들"},{default:a(()=>l[11]||(l[11]=[t("4. 편리하게 데이터를 얻기 위해 고려할 것들")])),_:1}),i("ul",null,[i("li",null,[e(n,{to:"#_4-1-로그-형식"},{default:a(()=>l[12]||(l[12]=[t("4.1 로그 형식")])),_:1})]),i("li",null,[e(n,{to:"#_4-2-메타데이터-사용에-대한-고민"},{default:a(()=>l[13]||(l[13]=[t("4.2 메타데이터 사용에 대한 고민")])),_:1})]),i("li",null,[e(n,{to:"#_4-3-문맥-식별자와-고유-식별자"},{default:a(()=>l[14]||(l[14]=[t("4.3 문맥 식별자와 고유 식별자")])),_:1})])])]),i("li",null,[e(n,{to:"#_5-다른-관점에서-생각해볼-것"},{default:a(()=>l[15]||(l[15]=[t("5. 다른 관점에서 생각해볼 것")])),_:1})]),i("li",null,[e(n,{to:"#_6-로그-품질-관리"},{default:a(()=>l[16]||(l[16]=[t("6. 로그 품질 관리")])),_:1}),i("ul",null,[i("li",null,[e(n,{to:"#_6-1-로그의-문서화"},{default:a(()=>l[17]||(l[17]=[t("6.1 로그의 문서화")])),_:1})]),i("li",null,[e(n,{to:"#_6-2-로그-유실-모니터링"},{default:a(()=>l[18]||(l[18]=[t("6.2 로그 유실 모니터링")])),_:1})]),i("li",null,[e(n,{to:"#_6-3-로그-추가-및-변경의-포르세스화"},{default:a(()=>l[19]||(l[19]=[t("6.3 로그 추가 및 변경의 포르세스화")])),_:1})])])]),i("li",null,[e(n,{to:"#ref"},{default:a(()=>l[20]||(l[20]=[t("Ref.")])),_:1})])])]),l[21]||(l[21]=_('<h1 id="_0-로그" tabindex="-1"><a class="header-anchor" href="#_0-로그"><span>0. 로그</span></a></h1><p>로그는 시스템 로그와 서비스 로그로 나뉜다.</p><ul><li>시스템 로그 : 프로그램의 버그나 OS 레벨에서 시스템 이벤트를 추적하기 위해 남기는 로그</li><li>서비스 로그 : 운영하는 서비스에 대한 KIP 와 같은 지표를 분석하기 위해 또는 유저의 CS 에 대응하기 위해 남기는 로그</li></ul><p>여기서는 서비스 로그에 대해서만 얘기한다.</p><h1 id="_1-좋은-로그-에-대한-정의" tabindex="-1"><a class="header-anchor" href="#_1-좋은-로그-에-대한-정의"><span>1. &#39;&#39;좋은 로그&#39; 에 대한 정의</span></a></h1><ol><li>필요한 정보가 있다.</li><li>의미가 명확하다.</li><li>편리하게 데이터를 얻을 수 있다.</li></ol><p>위 조건에 반대되는 상황을 꼽자면,</p><ol><li>필요한 정보가 없다.</li><li>의미를 파악하기 어렵다. -&gt; 이 이벤트는 대체 무슨 의미지?</li><li>편리하게 데이터를 얻을 수 없다 -&gt; 값에 여러 데이터가 포함되어 매번 가공 처리를 해야 함</li></ol><h1 id="_2-필요한-정보가-있는-로그를-위해-고려해야-할-것들" tabindex="-1"><a class="header-anchor" href="#_2-필요한-정보가-있는-로그를-위해-고려해야-할-것들"><span>2. 필요한 정보가 있는 로그를 위해 고려해야 할 것들</span></a></h1><h2 id="_2-1-목표가-있는-로그" tabindex="-1"><a class="header-anchor" href="#_2-1-목표가-있는-로그"><span>2.1 목표가 있는 로그</span></a></h2><p>로그에는 먼저 목표가 있어야 한다.</p><ul><li>목표를 한문장으로 정의하고,</li><li>하나의 지표에 대해서 다양한 각도로 고민한다.</li><li>그리고 목표에 따라 남겨야 할 이벤트와 그 항목들을 정의한다.</li></ul><h2 id="_2-2-일관성" tabindex="-1"><a class="header-anchor" href="#_2-2-일관성"><span>2.2 일관성</span></a></h2><p>일관성이란 같은 구성요소에 대해 같은 항목을 가지는 것을 말한다. 여기서 구성요소라함은 서비스를 구성하는 각각의 요소를 말한다. 예를 들어 &quot;아이템 획득&quot; 과 &quot;아이템 사용&quot; 로그가 있을 때, 두 로그 모두 같은 항목으로 구성되어있어야 한다.</p><p>아래는 일관성 없는 예다.</p><p><img src="'+h+'" alt="image-20250908000707726"></p><h2 id="_2-3-믿을-수-있는-로그" tabindex="-1"><a class="header-anchor" href="#_2-3-믿을-수-있는-로그"><span>2.3 믿을 수 있는 로그</span></a></h2><ul><li>로그가 의도한 시점에서 발생했을 것이라는 믿음</li><li>의도한 대로 데이터가 남았을 것이라는 믿음</li></ul><h1 id="_3-의미가-명확한-로그를-위해-고려할-것들" tabindex="-1"><a class="header-anchor" href="#_3-의미가-명확한-로그를-위해-고려할-것들"><span>3. 의미가 명확한 로그를 위해 고려할 것들</span></a></h1><h2 id="_3-1-이름에-대한-합의와-규약" tabindex="-1"><a class="header-anchor" href="#_3-1-이름에-대한-합의와-규약"><span>3.1 이름에 대한 합의와 규약</span></a></h2><ul><li>의미를 충분히 표현할 수 있어야 함</li><li>나중에 이벤트 또는 항목의 이름을 바꾸는 것은 큰 비용이 듦 <ul><li>따라서 길더라도 구체적인 이름을 사용하여 다른 의미와 혼동될만한 가능성을 피하고 미래에 들어가는 이름과 의미가 충돌할 가능성을 낮춤</li></ul></li><li>이름을 정하기 위한 최소 규약(Naming convention) 정의</li></ul><h2 id="_3-2-이벤트를-구별하는-기준" tabindex="-1"><a class="header-anchor" href="#_3-2-이벤트를-구별하는-기준"><span>3.2 이벤트를 구별하는 기준</span></a></h2><ul><li><strong>&lt;상태&gt; 의 시작, &lt;상태&gt; 의 종료로 이벤트를 분류</strong><ul><li>의미적으로 명확하게 구분이 가능하지만, 이벤트 종류가 많아짐</li><li><strong>시작과 완료 시 항목 구성의 차이가 큰 경우</strong> 적합</li></ul></li></ul><p><img src="'+g+'" alt="image-20250908000744754"></p><ul><li><strong>&lt;상태&gt; 업데이트</strong><ul><li>로그 항목에서 상태변화를 알 수 있는 구조</li><li>다음과 같은 경우 좀 더 편리하게 분석할 수 있음 <ul><li>같은 구성요소에 대해 상태만 변함</li><li>항목 구성이 비슷함</li><li>이력의 변화가 중요</li></ul></li></ul></li></ul><p><img src="'+f+'" alt="image-20250908000814804"></p><h2 id="_3-3-표현력" tabindex="-1"><a class="header-anchor" href="#_3-3-표현력"><span>3.3 표현력</span></a></h2><ul><li>약간의 데이터 용량 절감을 위해 축약된 표현을 사용하지 않는다. <ul><li>저장 비용이 크지 않고, 압축 가능</li><li>득보다 실이 많을 수 있음</li></ul></li><li>경우에 따라 데이터 다입에 대한 고려 필요</li></ul><h2 id="_3-4-빈-값의-의미" tabindex="-1"><a class="header-anchor" href="#_3-4-빈-값의-의미"><span>3.4 빈 값의 의미</span></a></h2><p>빈 값은 다양하게 해석될 수 있다. 아예 정보가 존재하지 않거나, 값이 빈 값일 수 있습니다. 이를 명확히 구분해야 한다.</p><h1 id="_4-편리하게-데이터를-얻기-위해-고려할-것들" tabindex="-1"><a class="header-anchor" href="#_4-편리하게-데이터를-얻기-위해-고려할-것들"><span>4. 편리하게 데이터를 얻기 위해 고려할 것들</span></a></h1><h2 id="_4-1-로그-형식" tabindex="-1"><a class="header-anchor" href="#_4-1-로그-형식"><span>4.1 로그 형식</span></a></h2><p>일반적으로 Json 형식이 많이 사용된다.</p><h2 id="_4-2-메타데이터-사용에-대한-고민" tabindex="-1"><a class="header-anchor" href="#_4-2-메타데이터-사용에-대한-고민"><span>4.2 메타데이터 사용에 대한 고민</span></a></h2><p>메타데이터란 서비스를 구성하는 정보에 대해, 식별자와 그상세정보가 매핑된 데이터이다.</p><p><img src="'+m+'" alt="image-20250908000949478"></p><p>메타데이터는 좋을 수 있지만, 남용하면 관리가 어려워지고 생산성 저하를 유발한다. 또한 집계 시마다 로그 외의 다른 데이터를 참조해야 한다. 아래와 같은 상황에서 사용될 수 있다.</p><ul><li>정적 데이터가 과도하게 많을 때</li><li>정의했던 로그의 목표에 필요하지 않은 경우</li><li>변경 주체가 서비스 제공자에게 있는 경우</li><li>메타데이터가 불가피하게 많아질 경우</li></ul><h2 id="_4-3-문맥-식별자와-고유-식별자" tabindex="-1"><a class="header-anchor" href="#_4-3-문맥-식별자와-고유-식별자"><span>4.3 문맥 식별자와 고유 식별자</span></a></h2><ul><li>문맥 식별자(Context identifier) <ul><li>하나의 행동으로 일어난 여러 개의 로그를 한 문맥으로 보여줍니다. (traceId 와 같은 역할)</li></ul></li><li>고유 식별자(Unique identifier) <ul><li>중복 로그를 쉽게 식별</li><li>특정한 로그 하날를 기준으로 잡기 편리</li></ul></li></ul><h1 id="_5-다른-관점에서-생각해볼-것" tabindex="-1"><a class="header-anchor" href="#_5-다른-관점에서-생각해볼-것"><span>5. 다른 관점에서 생각해볼 것</span></a></h1><p><strong>서비스에 대한 영향을 고려</strong></p><p>서버에 과도한 부하를 일으킬 수 있는 경우 서버에서 캐싱을 하거나, 모든 유저에 대해 n초마다 발생하는 로그는 샘플링 또는 변경 시에만 남기도록 할 수 있다.</p><p><strong>할 수 있는 것부터</strong></p><p>남기지 않고 있거나, 잘못 남겨진 데이터는 깔끔히 포기하고, 현 상황에서 최선의 방향과 개선 방향을 찾아야 한다.</p><h1 id="_6-로그-품질-관리" tabindex="-1"><a class="header-anchor" href="#_6-로그-품질-관리"><span>6. 로그 품질 관리</span></a></h1><h2 id="_6-1-로그의-문서화" tabindex="-1"><a class="header-anchor" href="#_6-1-로그의-문서화"><span>6.1 로그의 문서화</span></a></h2><ul><li>로그의 목표와 의미</li><li>로그의 정확한 발생 시점</li><li>각 항목들의 의미와 데이터 타입</li><li>항목의 추가/변경/삭제 이력</li><li>특이사항 기록(발생 일시, 내용)</li><li>로그가 사용되는 곳 (어떤 대시보드에서 어떤 용도로 사용되고 있음 -&gt; 로그의 구조나 의미 변경 시 다른 지표에 대한 영향을 미리 파악할 수 있음)</li></ul><h2 id="_6-2-로그-유실-모니터링" tabindex="-1"><a class="header-anchor" href="#_6-2-로그-유실-모니터링"><span>6.2 로그 유실 모니터링</span></a></h2><p>비정상적인 로그 유실에 대한 감지를 위해 실시간으로 유입 상황과 유실을 모니터링할 수 있어야 하며, 버그 또는 시스템 이슈로 유실된 경우 언제, 얼마나, 어떤 데이터가 유실되었는지 기록해야 한다.</p><h2 id="_6-3-로그-추가-및-변경의-포르세스화" tabindex="-1"><a class="header-anchor" href="#_6-3-로그-추가-및-변경의-포르세스화"><span>6.3 로그 추가 및 변경의 포르세스화</span></a></h2><p><img src="'+k+'" alt="image-20250908000846668"></p><h1 id="ref" tabindex="-1"><a class="header-anchor" href="#ref"><span>Ref.</span></a></h1><ul><li><a href="https://speakerdeck.com/devinjeon/jamag-ndc19-joheun-rogeuran-mueosinga-joheun-rogeureul-wihae-goryeohaeya-hal-geosdeul?slide=26" target="_blank" rel="noopener noreferrer">(자막)[NDC19] 좋은 로그란 무엇인가?: 좋은 로그를 위해 고려해야 할 것들</a></li></ul>',54)),e(r)])}const q=d(v,[["render",b],["__file","2024-05-23-goodlog.html.vue"]]),C=JSON.parse(`{"path":"/posts/infra/2024-05-23-goodlog.html","title":"좋은 로그란","lang":"en-US","frontmatter":{"title":"좋은 로그란","date":"2024-05-23T00:00:00.000Z","tags":["log"],"description":"로깅 모듈 개발을 위한 공부"},"headers":[{"level":1,"title":"0. 로그","slug":"_0-로그","link":"#_0-로그","children":[]},{"level":1,"title":"1. ''좋은 로그' 에 대한 정의","slug":"_1-좋은-로그-에-대한-정의","link":"#_1-좋은-로그-에-대한-정의","children":[]},{"level":1,"title":"2. 필요한 정보가 있는 로그를 위해 고려해야 할 것들","slug":"_2-필요한-정보가-있는-로그를-위해-고려해야-할-것들","link":"#_2-필요한-정보가-있는-로그를-위해-고려해야-할-것들","children":[{"level":2,"title":"2.1 목표가 있는 로그","slug":"_2-1-목표가-있는-로그","link":"#_2-1-목표가-있는-로그","children":[]},{"level":2,"title":"2.2 일관성","slug":"_2-2-일관성","link":"#_2-2-일관성","children":[]},{"level":2,"title":"2.3 믿을 수 있는 로그","slug":"_2-3-믿을-수-있는-로그","link":"#_2-3-믿을-수-있는-로그","children":[]}]},{"level":1,"title":"3. 의미가 명확한 로그를 위해 고려할 것들","slug":"_3-의미가-명확한-로그를-위해-고려할-것들","link":"#_3-의미가-명확한-로그를-위해-고려할-것들","children":[{"level":2,"title":"3.1 이름에 대한 합의와 규약","slug":"_3-1-이름에-대한-합의와-규약","link":"#_3-1-이름에-대한-합의와-규약","children":[]},{"level":2,"title":"3.2 이벤트를 구별하는 기준","slug":"_3-2-이벤트를-구별하는-기준","link":"#_3-2-이벤트를-구별하는-기준","children":[]},{"level":2,"title":"3.3 표현력","slug":"_3-3-표현력","link":"#_3-3-표현력","children":[]},{"level":2,"title":"3.4 빈 값의 의미","slug":"_3-4-빈-값의-의미","link":"#_3-4-빈-값의-의미","children":[]}]},{"level":1,"title":"4. 편리하게 데이터를 얻기 위해 고려할 것들","slug":"_4-편리하게-데이터를-얻기-위해-고려할-것들","link":"#_4-편리하게-데이터를-얻기-위해-고려할-것들","children":[{"level":2,"title":"4.1 로그 형식","slug":"_4-1-로그-형식","link":"#_4-1-로그-형식","children":[]},{"level":2,"title":"4.2 메타데이터 사용에 대한 고민","slug":"_4-2-메타데이터-사용에-대한-고민","link":"#_4-2-메타데이터-사용에-대한-고민","children":[]},{"level":2,"title":"4.3 문맥 식별자와 고유 식별자","slug":"_4-3-문맥-식별자와-고유-식별자","link":"#_4-3-문맥-식별자와-고유-식별자","children":[]}]},{"level":1,"title":"5. 다른 관점에서 생각해볼 것","slug":"_5-다른-관점에서-생각해볼-것","link":"#_5-다른-관점에서-생각해볼-것","children":[]},{"level":1,"title":"6. 로그 품질 관리","slug":"_6-로그-품질-관리","link":"#_6-로그-품질-관리","children":[{"level":2,"title":"6.1 로그의 문서화","slug":"_6-1-로그의-문서화","link":"#_6-1-로그의-문서화","children":[]},{"level":2,"title":"6.2 로그 유실 모니터링","slug":"_6-2-로그-유실-모니터링","link":"#_6-2-로그-유실-모니터링","children":[]},{"level":2,"title":"6.3 로그 추가 및 변경의 포르세스화","slug":"_6-3-로그-추가-및-변경의-포르세스화","link":"#_6-3-로그-추가-및-변경의-포르세스화","children":[]}]},{"level":1,"title":"Ref.","slug":"ref","link":"#ref","children":[]}],"git":{},"filePathRelative":"_posts/infra/2024-05-23-goodlog.md"}`);export{q as comp,C as data};
